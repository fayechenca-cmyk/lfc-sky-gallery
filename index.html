<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>LFC SYSTEM: Sky Gallery</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&family=Playfair+Display:ital,wght@0,500;1,500&display=swap" rel="stylesheet">

  <style>
    body{margin:0;overflow:hidden;background:linear-gradient(to bottom,#e0f2fe 0%,#f0f9ff 100%);font-family:Montserrat,sans-serif;touch-action:none;user-select:none}
    #canvas-container{position:fixed;inset:0}
    #ui-layer{position:absolute;inset:0;pointer-events:none;z-index:10}

    #hud{position:absolute;top:2rem;left:2rem;pointer-events:auto}
    h1{font-weight:800;font-size:1.8rem;margin:0;color:#1e3a8a;letter-spacing:-1px;text-transform:uppercase}
    .subtitle{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:3px;color:#1e40af;margin-top:4px;display:flex;align-items:center;gap:8px}
    .live-dot{width:6px;height:6px;background:#22c55e;border-radius:50%;box-shadow:0 0 10px #22c55e}

    #journey-btn{margin-top:1.5rem;background:#fff;border:1px solid #1e3a8a;padding:1rem 1.5rem;border-radius:0;cursor:pointer;display:flex;align-items:center;gap:12px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;transition:.3s;pointer-events:auto;box-shadow:0 4px 20px rgba(0,0,0,.1)}
    #journey-btn:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,.15)}
    .counter{background:#1e3a8a;color:#fff;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px}

    #elevator{position:absolute;top:50%;right:2rem;transform:translateY(-50%);display:flex;flex-direction:column;gap:6px;pointer-events:auto;max-height:70vh;overflow:auto;padding:10px 0}
    .floor-item{display:flex;align-items:center;justify-content:flex-end;gap:10px;cursor:pointer;transition:.2s;opacity:.8;padding:4px 0}
    .floor-item:hover,.floor-item.active{opacity:1;transform:translateX(-5px)}
    .floor-label{background:rgba(255,255,255,.9);padding:8px 16px;border-radius:4px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;box-shadow:0 4px 10px rgba(0,0,0,.05);color:#1e3a8a;white-space:nowrap;backdrop-filter:blur(5px)}
    .floor-num{width:32px;height:32px;background:#fff;color:#1e3a8a;border:1px solid #1e3a8a;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;border-radius:50%;box-shadow:0 4px 10px rgba(0,0,0,.1)}
    .floor-item.active .floor-num{background:#1e3a8a;color:#fff}

    #back-btn{position:absolute;bottom:3rem;left:50%;transform:translateX(-50%) translateY(100px);background:#1e3a8a;color:#fff;padding:1rem 3rem;font-weight:700;font-size:12px;text-transform:uppercase;letter-spacing:2px;cursor:pointer;pointer-events:auto;opacity:0;transition:.5s;box-shadow:0 20px 40px rgba(0,0,0,.2)}
    #back-btn.visible{opacity:1;transform:translateX(-50%) translateY(0)}

    #ai-panel{position:absolute;top:0;right:0;bottom:0;width:450px;max-width:100%;background:rgba(255,255,255,.95);backdrop-filter:blur(20px);transform:translateX(100%);transition:transform .6s cubic-bezier(.22,1,.36,1);pointer-events:auto;display:flex;flex-direction:column;z-index:50;box-shadow:-20px 0 50px rgba(0,0,0,.05);border-left:1px solid rgba(0,0,0,.1)}
    #ai-panel.active{transform:translateX(0)}
    .ai-header{padding:2rem;border-bottom:1px solid #f0f0f0;background:#fafafa;position:relative}
    .ai-title{font-family:"Playfair Display";font-size:1.8rem;margin:0;color:#1e3a8a}
    .ai-meta{font-size:11px;text-transform:uppercase;color:#64748b;margin-top:5px;letter-spacing:.5px}
    .ai-img-preview{width:100%;height:180px;object-fit:contain;margin-bottom:1rem;display:block;background:#f0f0f0;border-radius:4px}
    .panel-close{position:absolute;top:1rem;right:1rem;font-size:1.5rem;cursor:pointer;color:#1e3a8a}

    .mode-switcher{display:flex;background:#f1f5f9;padding:4px;margin-top:15px;border-radius:8px}
    .mode-btn{flex:1;padding:10px;border:none;cursor:pointer;font-size:10px;font-weight:700;text-transform:uppercase;color:#94a3b8;background:transparent;transition:.2s;font-family:Montserrat;border-radius:6px}
    .mode-btn.active{background:#fff;color:#1e3a8a;box-shadow:0 2px 5px rgba(0,0,0,.05)}

    #chat-stream{flex:1;padding:2rem;overflow:auto;display:flex;flex-direction:column;gap:1rem;padding-bottom:20px}
    .msg{padding:16px 20px;border-radius:4px;font-size:14px;line-height:1.6;max-width:85%}
    .msg-ai{background:#f8fafc;color:#334155;align-self:flex-start;border-left:3px solid #1e3a8a;border-bottom-left-radius:2px}
    .msg-user{background:#111;color:#fff;align-self:flex-end;border-bottom-right-radius:2px}
    .chat-input-area{padding:1.5rem;border-top:1px solid #eee;background:#fff;display:flex;gap:10px;align-items:center}
    #user-input{flex:1;padding:14px;border:1px solid #cbd5e1;font-family:Montserrat,sans-serif;font-size:14px;outline:none;border-radius:4px}
    #send-btn{background:#1e3a8a;color:#fff;border:none;padding:14px 24px;cursor:pointer;font-weight:700;font-size:12px;text-transform:uppercase;border-radius:4px}

    #loader{position:absolute;inset:0;background:#fff;z-index:100;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity .5s}
    .loader-bar{width:200px;height:2px;background:#e2e8f0;margin-top:1rem;overflow:hidden}
    .loader-fill{width:0%;height:100%;background:#1e3a8a;transition:width .3s}
  </style>
</head>

<body>
  <div id="ui-layer">
    <div id="hud">
      <h1>LFC SYSTEM</h1>
      <div class="subtitle"><div class="live-dot"></div> SKY GALLERY</div>
      <div id="journey-btn">
        <span>My Journey</span>
        <div class="counter" id="journey-count">0</div>
      </div>
    </div>

    <div id="elevator"></div>

    <div id="back-btn"><span>← Return to Gallery</span></div>

    <div id="ai-panel">
      <div class="ai-header">
        <span class="panel-close" id="panel-close">×</span>
        <img id="ai-img" class="ai-img-preview" src="" alt="" />
        <h2 class="ai-title" id="ai-title">Untitled</h2>
        <div class="ai-meta" id="ai-meta"></div>

        <div class="mode-switcher">
          <button class="mode-btn active" id="btn-docent">Docent</button>
          <button class="mode-btn" id="btn-curator">Curator</button>
        </div>
      </div>

      <div id="chat-stream"></div>

      <div class="chat-input-area">
        <input type="text" id="user-input" placeholder="Ask about this artwork..." />
        <button id="send-btn">Send</button>
      </div>
    </div>
  </div>

  <div id="loader"><div class="loader-bar"><div class="loader-fill" id="load-fill"></div></div></div>
  <div id="canvas-container"></div>

  <script src="./app.js"></script>
</body>
</html>
